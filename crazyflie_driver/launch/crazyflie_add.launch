<?xml version="1.0"?>

<launch>
  <arg name="uri" default="radio://0/80/2M" />
  <arg name="tf_prefix" default="" />
  <arg name="roll_trim" default="0" />
  <arg name="pitch_trim" default="0" />
  <arg name="enable_logging" default="True" />
  <arg name="use_ros_time" default="True" />
  <arg name="enable_logging_imu" default="False" />
  <arg name="enable_logging_temperature" default="False" />
  <arg name="enable_logging_magnetic_field" default="False" />
  <arg name="enable_logging_pressure" default="False" />
  <arg name="enable_logging_battery" default="False" />

  <node pkg="crazyflie_driver" type="crazyflie_add" name="crazyflie_add" output="screen">
    <param name="uri" value="$(arg uri)" />
    <param name="tf_prefix" value="$(arg tf_prefix)" />
    <param name="roll_trim" value="$(arg roll_trim)" />
    <param name="pitch_trim" value="$(arg pitch_trim)" />
    <param name="enable_logging" value="$(arg enable_logging)" />
    <param name="use_ros_time" value="$(arg use_ros_time)" />
    <param name="enable_logging_imu" value="$(arg enable_logging_imu)" />
    <param name="enable_logging_temperature" value="$(arg enable_logging_temperature)" />
    <param name="enable_logging_magnetic_field" value="$(arg enable_logging_magnetic_field)" />
    <param name="enable_logging_pressure" value="$(arg enable_logging_pressure)" />
    <param name="enable_logging_battery" value="$(arg enable_logging_battery)" />
    <rosparam>
      genericLogTopics: ["ekf_pos"]
      genericLogTopicFrequencies: [10]
      genericLogTopic_ekf_pos_Variables: [ "ekf_pos.x", "ekf_pos.y", "ekf_pos.z", "ekf_pos.vicon_x", "ekf_pos.vicon_y", "ekf_pos.vicon_z"]
    </rosparam>
    <!--
    <rosparam>
      genericLogTopics: ["ctrlDebug"]
      genericLogTopicFrequencies: [10]
      genericLogTopic_ctrlDebug_Variables: [ "ekf_pos.x", "ekf_pos.y", "ekf_pos.z", "ekf_pos.vicon_x", "ekf_pos.vicon_y", "ekf_pos.vicon_z"]
    </rosparam>
    <rosparam>
      genericLogTopics: ["tilthexThrusts"]
      genericLogTopicFrequencies: [100]
      genericLogTopic_tilthexThrusts_Variables: [ "tilthexThrusts.t0", "tilthexThrusts.t1", "tilthexThrusts.t2", "tilthexThrusts.t3", "tilthexThrusts.t4", "tilthexThrusts.t5"]
    </rosparam>
    <rosparam>
      genericLogTopics: ["tiltDbg"]
      genericLogTopicFrequencies: [100]
      genericLogTopic_tiltDbg_Variables: [ "tiltDbg.vicon", "tiltDbg.setpt", "tiltDbg.emerg", "tiltDbg.x_frac"]
    </rosparam>
    <rosparam>
      genericLogTopics: ["ext_quat"]
      genericLogTopicFrequencies: [10]
      genericLogTopic_ext_quat_Variables: ["ext_quat.x", "ext_quat.y", "ext_quat.z", "ext_quat.w"]
    </rosparam>
    <rosparam>
      genericLogTopics: ["ekf_pos"]
      genericLogTopicFrequencies: [100]
      genericLogTopic_ekf_pos_Variables: ["ekf_pos.x", "ekf_pos.y", "ekf_pos.z", "ekf_pos.usec"]
    </rosparam>
    -->
  </node>
</launch>
